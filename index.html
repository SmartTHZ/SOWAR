<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>نظام الطوارئ الحكومي - حماية ضحايا العنف الأسري</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&amp;callback=initMap&amp;libraries=marker&amp;v=beta" defer></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        @keyframes pulse-red {
            0%, 100% { 
                transform: scale(1);
                opacity: 1;
            }
            50% { 
                transform: scale(1.3);
                opacity: 0.7;
            }
        }
        
        @keyframes ripple {
            0% {
                transform: scale(1);
                opacity: 0.8;
            }
            100% {
                transform: scale(2.5);
                opacity: 0;
            }
        }
        
        .pulse-dot {
            animation: pulse-red 1.5s ease-in-out infinite;
        }
        
        .ripple-effect {
            position: absolute;
            border-radius: 50%;
            border: 2px solid #ef4444;
            animation: ripple 2s ease-out infinite;
        }
        
        .emergency-glow {
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
        }
        
        .warning-glow {
            box-shadow: 0 0 15px rgba(249, 115, 22, 0.4);
        }
        
        .alert-glow {
            box-shadow: 0 0 10px rgba(234, 179, 8, 0.3);
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #18181b;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #3f3f46;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #52525b;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="/_sdk/element_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-zinc-950 text-white font-sans overflow-auto">
  <div class="h-full w-full flex"><!-- القائمة الجانبية اليمنى -->
   <aside class="w-64 bg-zinc-900 border-l border-zinc-800 flex flex-col">
    <div class="p-6 border-b border-zinc-800">
     <h1 class="text-xl font-bold text-red-500">نظام الطوارئ الحكومي</h1>
     <p class="text-xs text-zinc-400 mt-2">حماية ضحايا العنف الأسري</p>
    </div>
    <nav class="flex-1 p-4"><a href="#reports" class="flex items-center gap-3 p-3 rounded-lg bg-red-900/30 text-red-400 mb-2 transition-colors hover:bg-red-900/50">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg><span class="font-semibold">البلاغات</span> </a> <a href="#map" class="flex items-center gap-3 p-3 rounded-lg hover:bg-zinc-800 text-zinc-400 mb-2 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
      </svg><span>الخريطة</span> </a> <a href="#critical" class="flex items-center gap-3 p-3 rounded-lg hover:bg-zinc-800 text-zinc-400 mb-2 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
      </svg><span>الحالات الحرجة</span> </a> <a href="#settings" class="flex items-center gap-3 p-3 rounded-lg hover:bg-zinc-800 text-zinc-400 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg><span>الإعدادات</span> </a>
    </nav>
    <div class="p-4 border-t border-zinc-800">
     <div class="flex items-center gap-2 text-xs text-zinc-500">
      <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span>النظام متصل</span>
     </div>
    </div>
   </aside><!-- المحتوى الرئيسي -->
   <main class="flex-1 flex overflow-hidden"><!-- الخريطة في المنتصف -->
    <div class="flex-1 bg-zinc-900 relative"><!-- Google Maps Container -->
     <div id="map" class="absolute inset-0 w-full h-full"></div><!-- عنوان الخريطة -->
     <div class="absolute top-6 left-6 bg-zinc-800/90 px-6 py-3 rounded-lg border border-zinc-700 z-10 shadow-lg">
      <h2 class="text-lg font-bold flex items-center gap-2">
       <svg class="w-5 h-5 text-red-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7" />
       </svg> الخريطة الحية</h2>
     </div><!-- شريط الحالة السفلي -->
     <div class="absolute bottom-0 left-0 right-0 bg-zinc-900/95 border-t border-zinc-800 px-6 py-3">
      <div class="flex items-center justify-between text-sm flex-wrap gap-4">
       <div class="flex items-center gap-6">
        <div class="flex items-center gap-2">
         <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div><span class="text-zinc-300">3 أساور متصلة</span>
        </div>
        <div class="text-zinc-400">
         آخر تحديث قبل <span class="text-green-400 font-bold" id="last-update">10 ثوانٍ</span>
        </div>
       </div>
       <div class="text-zinc-400 flex items-center gap-2">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
        </svg><span>جميع البيانات مشفرة ومحمية</span>
       </div>
      </div>
     </div>
    </div><!-- بطاقات الطوارئ على اليسار -->
    <aside class="w-96 bg-zinc-950 border-l border-zinc-800 overflow-y-auto p-4 space-y-4">
     <h2 class="text-lg font-bold text-red-400 mb-4 flex items-center gap-2">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
      </svg> حالات طوارئ نشطة (3)</h2><!-- البطاقة 1: حالة حرجة -->
     <div class="bg-red-950/50 border-2 border-red-800 rounded-xl p-4 emergency-glow">
      <div class="flex items-start justify-between mb-3">
       <h3 class="text-base font-bold text-red-300">حالة طوارئ حرجة – تدخل فوري</h3><span class="px-2 py-1 bg-red-600 text-white text-xs rounded-full font-bold animate-pulse">عاجل</span>
      </div>
      <div class="space-y-2 text-sm"><!-- رقم ID السوار -->
       <div class="flex items-center gap-2 text-red-100 bg-red-900/40 px-3 py-2.5 rounded-lg border border-red-700">
        <svg class="w-5 h-5 text-red-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
        </svg><span class="font-bold">رقم السوار:</span> <span class="text-red-50 font-mono text-base tracking-wider">VW-2453</span>
       </div>
       <div class="flex items-center gap-2 text-red-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg><span class="font-medium">الموقع:</span> <span class="text-red-300">الرياض - حي النخيل</span>
       </div>
       <div class="flex items-center gap-2 text-red-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg><span class="font-medium">الوقت:</span> <span class="text-red-300" id="time-1">21:45:30</span>
       </div>
       <div class="flex items-center gap-2 text-red-200">
        <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
        </svg><span class="font-medium">النبض:</span> <span class="text-red-400 font-bold">135 نبضة/دقيقة ⚠️</span>
       </div>
       <div class="flex items-center gap-2 text-red-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122" />
        </svg><span class="font-medium">الضغطات:</span> <span class="text-red-400 font-bold">3 مرات خلال 10 ثوانٍ</span>
       </div>
       <div class="flex items-center gap-2 text-red-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg><span class="font-medium">اتصال السوار بالخادم:</span> <span class="text-red-300">مستقر</span>
       </div>
      </div><button onclick="sendEmergencyTeam(1, 'VW-2453')" class="w-full mt-4 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
       </svg><span>إرسال فريق الطوارئ الآن</span> </button>
     </div><!-- البطاقة 2: خطر عالي -->
     <div class="bg-orange-950/50 border-2 border-orange-700 rounded-xl p-4 warning-glow">
      <div class="flex items-start justify-between mb-3">
       <h3 class="text-base font-bold text-orange-300">خطر عالي – تدخل عاجل</h3><span class="px-2 py-1 bg-orange-600 text-white text-xs rounded-full font-bold">عالي</span>
      </div>
      <div class="space-y-2 text-sm"><!-- رقم ID السوار -->
       <div class="flex items-center gap-2 text-orange-100 bg-orange-900/40 px-3 py-2.5 rounded-lg border border-orange-700">
        <svg class="w-5 h-5 text-orange-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
        </svg><span class="font-bold">رقم السوار:</span> <span class="text-orange-50 font-mono text-base tracking-wider">VW-7891</span>
       </div>
       <div class="flex items-center gap-2 text-orange-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg><span class="font-medium">الموقع:</span> <span class="text-orange-300">جدة - حي الصفا</span>
       </div>
       <div class="flex items-center gap-2 text-orange-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg><span class="font-medium">الوقت:</span> <span class="text-orange-300" id="time-2">21:42:15</span>
       </div>
       <div class="flex items-center gap-2 text-orange-200">
        <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
        </svg><span class="font-medium">النبض:</span> <span class="text-orange-400 font-bold">110 نبضة/دقيقة</span>
       </div>
       <div class="flex items-center gap-2 text-orange-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122" />
        </svg><span class="font-medium">الضغطات:</span> <span class="text-orange-400 font-bold">2 مرات</span>
       </div>
       <div class="flex items-center gap-2 text-orange-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg><span class="font-medium">اتصال السوار بالخادم:</span> <span class="text-orange-300">مستقر</span>
       </div>
      </div><button onclick="sendEmergencyTeam(2, 'VW-7891')" class="w-full mt-4 bg-orange-600 hover:bg-orange-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
       </svg><span>إرسال فريق الطوارئ</span> </button>
     </div><!-- البطاقة 3: استغاثة صامتة -->
     <div class="bg-yellow-950/50 border-2 border-yellow-700 rounded-xl p-4 alert-glow">
      <div class="flex items-start justify-between mb-3">
       <h3 class="text-base font-bold text-yellow-300">استغاثة مؤكدة – تقييم سريع</h3><span class="px-2 py-1 bg-yellow-600 text-white text-xs rounded-full font-bold">متوسط</span>
      </div>
      <div class="space-y-2 text-sm"><!-- رقم ID السوار -->
       <div class="flex items-center gap-2 text-yellow-100 bg-yellow-900/40 px-3 py-2.5 rounded-lg border border-yellow-700">
        <svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
        </svg><span class="font-bold">رقم السوار:</span> <span class="text-yellow-50 font-mono text-base tracking-wider">VW-3267</span>
       </div>
       <div class="flex items-center gap-2 text-yellow-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg><span class="font-medium">الموقع:</span> <span class="text-yellow-300">الدمام - حي الفيصلية</span>
       </div>
       <div class="flex items-center gap-2 text-yellow-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg><span class="font-medium">الوقت:</span> <span class="text-yellow-300" id="time-3">21:38:50</span>
       </div>
       <div class="flex items-center gap-2 text-yellow-200">
        <svg class="w-4 h-4" fill="currentColor" viewbox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
        </svg><span class="font-medium">النبض:</span> <span class="text-yellow-400 font-bold">88 نبضة/دقيقة</span>
       </div>
       <div class="flex items-center gap-2 text-yellow-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122" />
        </svg><span class="font-medium">الضغطات:</span> <span class="text-yellow-400 font-bold">1 مرة</span>
       </div>
       <div class="flex items-center gap-2 text-yellow-200">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
        </svg><span class="font-medium">اتصال السوار بالخادم:</span> <span class="text-yellow-300">مستقر</span>
       </div>
      </div><button onclick="sendEmergencyTeam(3, 'VW-3267')" class="w-full mt-4 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-3 px-4 rounded-lg transition-colors flex items-center justify-center gap-2">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
       </svg><span>إرسال فريق الطوارئ</span> </button>
     </div>
    </aside>
   </main>
  </div><!-- Toast notification -->
  <div id="toast" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg hidden items-center gap-2 z-50">
   <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
   </svg><span id="toast-message">تم الإرسال بنجاح</span>
  </div>
  <script>
        let map;
        let markers = [];

        // Initialize Google Map
        function initMap() {
            // Emergency locations data
            const emergencyLocations = [
                {
                    id: 'VW-2453',
                    position: { lat: 24.7136, lng: 46.6753 }, // الرياض - حي النخيل
                    title: 'حالة طوارئ حرجة',
                    description: 'السوار: VW-2453<br>الموقع: الرياض - حي النخيل<br>الحالة: عاجل جداً',
                    severity: 'critical'
                },
                {
                    id: 'VW-7891',
                    position: { lat: 21.5433, lng: 39.1728 }, // جدة - حي الصفا
                    title: 'خطر عالي',
                    description: 'السوار: VW-7891<br>الموقع: جدة - حي الصفا<br>الحالة: عاجل',
                    severity: 'high'
                },
                {
                    id: 'VW-3267',
                    position: { lat: 26.4207, lng: 50.0888 }, // الدمام - حي الفيصلية
                    title: 'استغاثة مؤكدة',
                    description: 'السوار: VW-3267<br>الموقع: الدمام - حي الفيصلية<br>الحالة: متوسط',
                    severity: 'medium'
                }
            ];

            // Create map centered on Saudi Arabia
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 6,
                center: { lat: 24.7136, lng: 46.6753 }, // الرياض
                mapTypeId: 'roadmap',
                styles: [
                    {
                        "elementType": "geometry",
                        "stylers": [{"color": "#212121"}]
                    },
                    {
                        "elementType": "labels.icon",
                        "stylers": [{"visibility": "off"}]
                    },
                    {
                        "elementType": "labels.text.fill",
                        "stylers": [{"color": "#757575"}]
                    },
                    {
                        "elementType": "labels.text.stroke",
                        "stylers": [{"color": "#212121"}]
                    },
                    {
                        "featureType": "administrative",
                        "elementType": "geometry",
                        "stylers": [{"color": "#757575"}]
                    },
                    {
                        "featureType": "poi",
                        "elementType": "labels.text.fill",
                        "stylers": [{"color": "#757575"}]
                    },
                    {
                        "featureType": "road",
                        "elementType": "geometry.fill",
                        "stylers": [{"color": "#2c2c2c"}]
                    },
                    {
                        "featureType": "road",
                        "elementType": "labels.text.fill",
                        "stylers": [{"color": "#8a8a8a"}]
                    },
                    {
                        "featureType": "water",
                        "elementType": "geometry",
                        "stylers": [{"color": "#000000"}]
                    },
                    {
                        "featureType": "water",
                        "elementType": "labels.text.fill",
                        "stylers": [{"color": "#3d3d3d"}]
                    }
                ],
                streetViewControl: true,
                mapTypeControl: true,
                fullscreenControl: true,
                zoomControl: true
            });

            // Add markers for each emergency location
            emergencyLocations.forEach(location => {
                const marker = new google.maps.Marker({
                    position: location.position,
                    map: map,
                    title: location.title,
                    animation: google.maps.Animation.DROP,
                    icon: {
                        path: google.maps.SymbolPath.CIRCLE,
                        scale: 12,
                        fillColor: location.severity === 'critical' ? '#dc2626' : 
                                   location.severity === 'high' ? '#ea580c' : '#ca8a04',
                        fillOpacity: 1,
                        strokeColor: '#ffffff',
                        strokeWeight: 3
                    }
                });

                // Create info window
                const infoWindow = new google.maps.InfoWindow({
                    content: `
                        <div style="color: #000; padding: 10px; font-family: Arial, sans-serif;">
                            <h3 style="margin: 0 0 8px 0; font-weight: bold; color: ${
                                location.severity === 'critical' ? '#dc2626' : 
                                location.severity === 'high' ? '#ea580c' : '#ca8a04'
                            };">${location.title}</h3>
                            <p style="margin: 0; line-height: 1.6;">${location.description}</p>
                        </div>
                    `
                });

                // Add click listener to show info window
                marker.addListener('click', () => {
                    // Close all other info windows
                    markers.forEach(m => m.infoWindow.close());
                    infoWindow.open(map, marker);
                });

                // Animate marker for critical cases
                if (location.severity === 'critical') {
                    setInterval(() => {
                        marker.setAnimation(google.maps.Animation.BOUNCE);
                        setTimeout(() => marker.setAnimation(null), 1000);
                    }, 3000);
                }

                markers.push({ marker, infoWindow });
            });
        }

        // Update time every second
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-SA', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            document.getElementById('time-1').textContent = timeString;
            document.getElementById('time-2').textContent = timeString;
            document.getElementById('time-3').textContent = timeString;
        }

        // Update last update counter
        let lastUpdateSeconds = 10;
        function updateLastUpdate() {
            lastUpdateSeconds++;
            if (lastUpdateSeconds > 60) {
                lastUpdateSeconds = 10; // Reset for demo
            }
            document.getElementById('last-update').textContent = lastUpdateSeconds + ' ثوانٍ';
        }

        // Send emergency team function with ID
        function sendEmergencyTeam(cardNumber, braceletId) {
            const buttons = document.querySelectorAll('button[onclick^="sendEmergencyTeam"]');
            const button = buttons[cardNumber - 1];
            
            // Disable button and show loading
            button.disabled = true;
            const originalContent = button.innerHTML;
            button.innerHTML = '<span class="animate-pulse">جاري الإرسال...</span>';
            
            // Simulate sending
            setTimeout(() => {
                button.innerHTML = `
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                    </svg>
                    <span>تم إرسال الفريق</span>
                `;
                
                // Show toast notification with bracelet ID
                showToast(`تم إرسال فريق الطوارئ للسوار رقم ${braceletId}`);
                
                // Reset button after 3 seconds
                setTimeout(() => {
                    button.disabled = false;
                    button.innerHTML = originalContent;
                }, 3000);
            }, 2000);
        }

        // Show toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toast-message');
            toastMessage.textContent = message;
            toast.classList.remove('hidden');
            toast.classList.add('flex');
            
            setTimeout(() => {
                toast.classList.add('hidden');
                toast.classList.remove('flex');
            }, 3000);
        }

        // Initialize updates
        setInterval(updateTime, 1000);
        setInterval(updateLastUpdate, 1000);
        updateTime();
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ac98e5e474e0e73',t:'MTc2NTUwNDA3MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>